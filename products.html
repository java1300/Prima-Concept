<!DOCTYPE html>
<html lang="mk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Производи - Prima Concept</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
    <script>
        // This script runs immediately before any content is rendered
        (function() {
            const savedLang = localStorage.getItem('language');
            if (savedLang) {
                document.documentElement.lang = savedLang;
                // Hide content until proper language is loaded
                document.documentElement.style.visibility = 'hidden';
                window.addEventListener('DOMContentLoaded', function() {
                    // Make content visible once language is properly set
                    setTimeout(function() {
                        document.documentElement.style.visibility = 'visible';
                    }, 50);
                });
            }
        })();
    </script>
</head>
<body>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg">
    <div class="container">
        <div class="brand-wrapper">
          <a class="navbar-brand" href="index.html">
          <span class="prima">PRIMA</span><span class="concept">CONCEPT</span>
        </a>
        <span class="since-text">Since 2014.</span>
      </div>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item"><a class="nav-link" href="index.html">Почетна</a></li>
                <li class="nav-item"><a class="nav-link" href="products.html">Производи</a></li>
                <li class="nav-item"><a class="nav-link" href="gallery.html">Галерија</a></li>
                <li class="nav-item"><a class="nav-link" href="contact.html">Контакт</a></li>
            </ul>
            <div class="d-flex align-items-center">
                <select id="languageSwitcher" class="form-select me-3" style="width: auto;">
                    <option value="mk" selected>МК</option>
                    <option value="sq">SQ</option>
                </select>
                <a href="contact.html" class="btn btn-search">Побарај Понуда</a>
            </div>
        </div>
    </div>
</nav>

<div class="container my-5">
    <div class="row">
        <!-- Updated Sidebar with Mobile Filter Button -->
        <div class="col-lg-3 col-md-4">
            <div class="sidebar">
                <button class="filter-button" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarContent" aria-expanded="false" aria-controls="sidebarContent">
                    <i class="bi bi-funnel"></i>
                    <span class="filter-text" data-mk="Филтрирај Продукти" data-sq="Filtro Produktet">Филтрирај Продукти</span>
                </button>
                <div id="sidebarContent" class="sidebar-content collapse">
                    <h3>Пребарување</h3>
                    <input type="text" id="searchInput" class="form-control mb-4" placeholder="Пребарај производи...">
                    <h4>Категории на производи</h4>
                    <ul class="list-unstyled" id="categoryList"></ul>
                </div>
            </div>
        </div>
        <!-- Product Grid -->
        <div class="col-lg-9 col-md-8">
            <div class="mb-4" id="laminateFilters" style="display: none;">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label for="collectionFilter" class="form-label">Колекција</label>
                        <select id="collectionFilter" class="form-select">
                            <option value="all">Сите колекции</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label for="thicknessFilter" class="form-label">Дебелина</label>
                        <select id="thicknessFilter" class="form-select">
                            <option value="all">Сите дебелини</option>
                        </select>
                    </div>
                </div>
            </div>
            <div id="productList" class="row product-grid"></div>
            <!-- Pagination Controls -->
            <nav aria-label="Product pagination" class="mt-4">
                <ul class="pagination justify-content-center" id="paginationControls"></ul>
            </nav>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Updated script for products.html with mobile sidebar, multilingual support, and pagination
    document.addEventListener('DOMContentLoaded', () => {
        let currentLang = localStorage.getItem('language') || 'mk';
        // Set language switcher value
        document.querySelector('#languageSwitcher').value = currentLang;

        console.log("Page loaded with language:", currentLang);

        // Initialize filter button text on page load
        const filterButton = document.querySelector('.filter-button .filter-text');
        if (filterButton) {
            if (currentLang === 'mk') {
                filterButton.textContent = filterButton.getAttribute('data-mk');
            } else if (currentLang === 'sq') {
                filterButton.textContent = filterButton.getAttribute('data-sq');
            }
        }

        // For Bootstrap 5 collapse functionality - show sidebar content on larger screens
        if (window.innerWidth >= 768) {
            document.getElementById('sidebarContent')?.classList.add('show');
        }

        // Toggle icon rotation on filter button click
        document.querySelector('.filter-button')?.addEventListener('click', function() {
            const isExpanded = this.getAttribute('aria-expanded') === 'true';
            this.setAttribute('aria-expanded', !isExpanded);
        });

        // Parse URL parameters first
        const urlParams = new URLSearchParams(window.location.search);
        const categoryParam = urlParams.get('category');
        const searchParam = urlParams.get('search');
        let currentPage = parseInt(urlParams.get('page')) || 1;

        console.log("URL parameters:", { categoryParam, searchParam, currentPage });

        Promise.all([
            fetch('products.json').then(res => res.json()),
            fetch('translations.json').then(res => res.json())
        ])
            .then(([products, translations]) => {
                console.log("Data loaded successfully");

                // Store category mappings between languages
                const categoryMappings = {};

                // Create mapping between category names in different languages
                const uniqueCategories = [...new Set(products.map(p => p.type.mk))];
                uniqueCategories.forEach(mkCategory => {
                    // Find a product with this category
                    const sampleProduct = products.find(p => p.type.mk === mkCategory);
                    if (sampleProduct) {
                        // Create mapping for this category across languages
                        Object.keys(sampleProduct.type).forEach(lang => {
                            if (!categoryMappings[lang]) categoryMappings[lang] = {};
                            categoryMappings[lang][mkCategory] = sampleProduct.type[lang];
                        });
                    }
                });

                console.log("Category mappings:", categoryMappings);

                const productList = document.getElementById('productList');
                const categoryList = document.getElementById('categoryList');
                const searchInput = document.getElementById('searchInput');
                const laminateFilters = document.getElementById('laminateFilters');
                const collectionFilter = document.getElementById('collectionFilter');
                const thicknessFilter = document.getElementById('thicknessFilter');
                const paginationControls = document.getElementById('paginationControls');

                // Define laminate category names in different languages
                const laminateCategoryNames = {
                    'mk': 'Ламинати',
                    'sq': 'Laminatet'
                };

                console.log("Laminate category names:", laminateCategoryNames);

                const productsPerPage = 12;

                const renderProducts = (filteredProducts, page = 1) => {
                    productList.innerHTML = '';
                    const start = (page - 1) * productsPerPage;
                    const end = start + productsPerPage;
                    const paginatedProducts = filteredProducts.slice(start, end);

                    console.log(`Rendering ${paginatedProducts.length} products for page ${page}`);

                    paginatedProducts.forEach((product) => {
                        const productLink = `products/product-${product.sku.replace(/[^a-zA-Z0-9]/g, '-').toLowerCase()}.html`;
                        const card = document.createElement('div');
                        card.className = 'col-lg-4 col-md-6 col-6 mb-4';
                        card.innerHTML = `
                            <div class="product-card">
                                <div class="image-container">
                                    <img src="${product.image}" alt="${product.name[currentLang]}" loading="lazy" onerror="this.src='img/placeholder.jpg'">
                                    <div class="product-icons">
                                        <a href="${productLink}" class="product-icon arrow-icon">
                                            <i class="fas fa-arrow-right"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <a href="${productLink}" class="card-title">${product.name[currentLang]}</a>
                                </div>
                            </div>
                        `;
                        productList.appendChild(card);
                    });

                    renderPagination(filteredProducts, page);
                };

                const renderPagination = (filteredProducts, currentPage) => {
                    paginationControls.innerHTML = '';
                    const totalPages = Math.ceil(filteredProducts.length / productsPerPage);

                    if (totalPages <= 1) return;

                    // Previous button with left arrow icon
                    const prevItem = document.createElement('li');
                    prevItem.className = `page-item ${currentPage === 1 ? 'disabled' : ''}`;
                    prevItem.innerHTML = `<a class="page-link" href="#" data-page="${currentPage - 1}" aria-label="Previous"><i class="bi bi-arrow-left"></i></a>`;
                    paginationControls.appendChild(prevItem);

                    // Page numbers
                    const maxVisiblePages = 5;
                    let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
                    let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

                    if (endPage - startPage + 1 < maxVisiblePages) {
                        startPage = Math.max(1, endPage - maxVisiblePages + 1);
                    }

                    if (startPage > 1) {
                        const firstPage = document.createElement('li');
                        firstPage.className = 'page-item';
                        firstPage.innerHTML = `<a class="page-link" href="#" data-page="1">1</a>`;
                        paginationControls.appendChild(firstPage);

                        if (startPage > 2) {
                            const ellipsis = document.createElement('li');
                            ellipsis.className = 'page-item disabled';
                            ellipsis.innerHTML = `<span class="page-link">...</span>`;
                            paginationControls.appendChild(ellipsis);
                        }
                    }

                    for (let i = startPage; i <= endPage; i++) {
                        const pageItem = document.createElement('li');
                        pageItem.className = `page-item ${i === currentPage ? 'active' : ''}`;
                        pageItem.innerHTML = `<a class="page-link" href="#" data-page="${i}">${i}</a>`;
                        paginationControls.appendChild(pageItem);
                    }

                    if (endPage < totalPages) {
                        if (endPage < totalPages - 1) {
                            const ellipsis = document.createElement('li');
                            ellipsis.className = 'page-item disabled';
                            ellipsis.innerHTML = `<span class="page-link">...</span>`;
                            paginationControls.appendChild(ellipsis);
                        }

                        const lastPage = document.createElement('li');
                        lastPage.className = 'page-item';
                        lastPage.innerHTML = `<a class="page-link" href="#" data-page="${totalPages}">${totalPages}</a>`;
                        paginationControls.appendChild(lastPage);
                    }

                    // Next button with right arrow icon
                    const nextItem = document.createElement('li');
                    nextItem.className = `page-item ${currentPage === totalPages ? 'disabled' : ''}`;
                    nextItem.innerHTML = `<a class="page-link" href="#" data-page="${currentPage + 1}" aria-label="Next"><i class="bi bi-arrow-right"></i></a>`;
                    paginationControls.appendChild(nextItem);
                };

                const updateStaticContent = () => {
                    const t = translations[currentLang].products;

                    // Update sidebar filter button text
                    const filterButton = document.querySelector('.filter-button .filter-text');
                    if (filterButton) {
                        filterButton.textContent = currentLang === 'mk' ?
                            filterButton.getAttribute('data-mk') :
                            filterButton.getAttribute('data-sq');
                    }

                    // Update other static content
                    document.querySelector('.sidebar-content h3').textContent = t.search;
                    searchInput.placeholder = t.search_placeholder;
                    document.querySelector('.sidebar-content h4').textContent = t.categories;
                    document.querySelector('#laminateFilters .col-md-6:first-child .form-label').textContent = t.laminate_filters.collection;
                    document.querySelector('#laminateFilters .col-md-6:last-child .form-label').textContent = t.laminate_filters.thickness;
                    collectionFilter.querySelector('option[value="all"]').textContent = t.laminate_filters.all_collections;
                    thicknessFilter.querySelector('option[value="all"]').textContent = t.laminate_filters.all_thicknesses;
                    console.log("Static content updated for language:", currentLang);
                };

                const renderCategories = () => {
                    const categories = [...new Set(products.map(p => p.type[currentLang]))];
                    console.log("Available categories:", categories);

                    const allCount = products.length;
                    categoryList.innerHTML = `
                        <li>
                            <a href="#" class="category-link active" data-category="all">${translations[currentLang].products.all_products} (${allCount})</a>
                        </li>
                        ${categories.map(type => `
                            <li>
                                <a href="#" class="category-link" data-category="${type}">${type} (${products.filter(p => p.type[currentLang] === type).length})</a>
                            </li>
                        `).join('')}
                    `;

                    console.log("Categories rendered in DOM");

                    // Handle category from URL parameter - now with language awareness
                    if (categoryParam) {
                        console.log(`Attempting to find category matching: "${categoryParam}" in ${currentLang}`);

                        // Get newly created category links
                        const categoryLinks = document.querySelectorAll('.category-link');
                        let targetCategoryLink = null;

                        // First try: See if any categoryParam matches directly in current language
                        for (const link of categoryLinks) {
                            const linkCategory = link.dataset.category;
                            const linkText = link.textContent.split('(')[0].trim();

                            if (linkCategory === categoryParam ||
                                linkText === categoryParam ||
                                linkText.includes(categoryParam) ||
                                categoryParam.includes(linkText)) {

                                console.log("MATCH FOUND in current language!");
                                targetCategoryLink = link;
                                break;
                            }
                        }

                        // Second try: If we're not in mk language, the categoryParam might be in mk
                        // We need to find the equivalent in the current language
                        if (!targetCategoryLink && currentLang !== 'mk') {
                            // Try to find if categoryParam matches any mk category
                            for (const mkCategory in categoryMappings.mk) {
                                if (mkCategory === categoryParam ||
                                    mkCategory.includes(categoryParam) ||
                                    categoryParam.includes(mkCategory)) {

                                    // Find equivalent in current language
                                    const currentLangCategory = categoryMappings[currentLang][mkCategory];
                                    console.log(`Found match in MK: "${mkCategory}" -> "${currentLangCategory}" in ${currentLang}`);

                                    // Find the link with this category
                                    for (const link of categoryLinks) {
                                        if (link.dataset.category === currentLangCategory) {
                                            console.log("Found corresponding category link");
                                            targetCategoryLink = link;
                                            break;
                                        }
                                    }

                                    if (targetCategoryLink) break;
                                }
                            }
                        }

                        // Third try: If the categoryParam might be URL encoded
                        if (!targetCategoryLink) {
                            try {
                                const decodedParam = decodeURIComponent(categoryParam);
                                console.log(`Trying with decoded parameter: "${decodedParam}"`);

                                for (const link of categoryLinks) {
                                    const linkCategory = link.dataset.category;
                                    const linkText = link.textContent.split('(')[0].trim();

                                    if (linkCategory === decodedParam ||
                                        linkText === decodedParam ||
                                        linkText.includes(decodedParam) ||
                                        decodedParam.includes(linkText)) {

                                        console.log("MATCH FOUND with decoded parameter!");
                                        targetCategoryLink = link;
                                        break;
                                    }
                                }

                                // Also check decoded against MK categories if we're in a different language
                                if (!targetCategoryLink && currentLang !== 'mk') {
                                    for (const mkCategory in categoryMappings.mk) {
                                        if (mkCategory === decodedParam ||
                                            mkCategory.includes(decodedParam) ||
                                            decodedParam.includes(mkCategory)) {

                                            // Find equivalent in current language
                                            const currentLangCategory = categoryMappings[currentLang][mkCategory];
                                            console.log(`Found match with decoded param in MK: "${mkCategory}" -> "${currentLangCategory}" in ${currentLang}`);

                                            // Find the link with this category
                                            for (const link of categoryLinks) {
                                                if (link.dataset.category === currentLangCategory) {
                                                    console.log("Found corresponding category link");
                                                    targetCategoryLink = link;
                                                    break;
                                                }
                                            }

                                            if (targetCategoryLink) break;
                                        }
                                    }
                                }
                            } catch (e) {
                                console.error("Error decoding URI component:", e);
                            }
                        }

                        // Set the found category as active
                        if (targetCategoryLink) {
                            console.log("Setting active category:", targetCategoryLink.textContent);
                            categoryLinks.forEach(l => l.classList.remove('active'));
                            targetCategoryLink.classList.add('active');
                        }
                    }
                };

                const populateFilters = () => {
                    collectionFilter.innerHTML = '<option value="all">' + translations[currentLang].products.laminate_filters.all_collections + '</option>';
                    thicknessFilter.innerHTML = '<option value="all">' + translations[currentLang].products.laminate_filters.all_thicknesses + '</option>';

                    // Get laminate products based on current language
                    const laminates = products.filter(p => p.type[currentLang] === laminateCategoryNames[currentLang]);
                    console.log(`Found ${laminates.length} laminate products`);

                    // Extract unique collections and thicknesses
                    const collections = [...new Set(laminates.filter(p => p.collection).map(p => p.collection[currentLang]))];
                    const thicknesses = [...new Set(laminates.filter(p => p.thickness).map(p => p.thickness[currentLang]))];

                    console.log("Available collections:", collections);
                    console.log("Available thicknesses:", thicknesses);

                    // Populate collection dropdown
                    collections.forEach(collection => {
                        const option = document.createElement('option');
                        option.value = collection;
                        option.textContent = collection;
                        collectionFilter.appendChild(option);
                    });

                    // Populate thickness dropdown
                    thicknesses.forEach(thickness => {
                        const option = document.createElement('option');
                        option.value = thickness;
                        option.textContent = thickness;
                        thicknessFilter.appendChild(option);
                    });

                    console.log("Filters populated");
                };

                const applyFilters = () => {
                    const activeCategory = document.querySelector('.category-link.active').dataset.category;
                    console.log("Active category:", activeCategory);

                    const searchTerm = searchInput.value.toLowerCase();
                    const selectedCollection = collectionFilter.value;
                    const selectedThickness = thicknessFilter.value;

                    console.log("Filter values:", {
                        searchTerm,
                        selectedCollection,
                        selectedThickness
                    });

                    let filteredProducts = products;

                    if (activeCategory !== 'all') {
                        filteredProducts = filteredProducts.filter(p => p.type[currentLang] === activeCategory);
                        console.log(`Filtered to ${filteredProducts.length} products after category filter`);
                    }

                    // Check if the active category is the laminate category in current language
                    if (activeCategory === laminateCategoryNames[currentLang]) {
                        console.log("Laminate category is active, showing laminate filters");
                        laminateFilters.style.display = 'block';
                        if (selectedCollection !== 'all') {
                            filteredProducts = filteredProducts.filter(p => p.collection && p.collection[currentLang] === selectedCollection);
                            console.log(`Filtered to ${filteredProducts.length} products after collection filter`);
                        }
                        if (selectedThickness !== 'all') {
                            filteredProducts = filteredProducts.filter(p => p.thickness && p.thickness[currentLang] === selectedThickness);
                            console.log(`Filtered to ${filteredProducts.length} products after thickness filter`);
                        }
                    } else {
                        console.log("Non-laminate category is active, hiding laminate filters");
                        laminateFilters.style.display = 'none';
                    }

                    if (searchTerm.length > 2) {
                        filteredProducts = filteredProducts.filter(p =>
                            p.name[currentLang].toLowerCase().includes(searchTerm) ||
                            p.description[currentLang].toLowerCase().includes(searchTerm)
                        );
                        console.log(`Filtered to ${filteredProducts.length} products after search`);
                    }

                    renderProducts(filteredProducts, currentPage);
                };

                // Set search value if provided in URL
                if (searchParam) {
                    searchInput.value = searchParam;
                }

                // Initial render
                updateStaticContent();
                renderCategories();
                populateFilters();
                applyFilters();  // This now applies filters including any category from URL parameters

                // Language change handler
                document.addEventListener('languageChange', (e) => {
                    currentLang = e.detail.language;
                    console.log("Language changed to:", currentLang);

                    // When language changes, we need to preserve the active category
                    const currentActiveCategory = document.querySelector('.category-link.active')?.dataset.category;
                    const isCategoryFromURL = !!categoryParam;

                    updateStaticContent();
                    renderCategories();
                    populateFilters();

                    // If we had a category from URL parameter, make sure the correct equivalent is selected
                    if (isCategoryFromURL && currentActiveCategory && currentActiveCategory !== 'all') {
                        console.log("Preserving category selection after language change");
                        // The renderCategories function will handle setting the active category
                    } else if (currentActiveCategory && currentActiveCategory !== 'all') {
                        // If user manually selected a category (not from URL), find equivalent in new language
                        // This should already be handled by renderCategories and applyFilters
                    }

                    applyFilters();
                });

                // Category filter
                categoryList.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (e.target.classList.contains('category-link')) {
                        const category = e.target.dataset.category;
                        console.log(`Category clicked: "${category}"`);

                        const links = categoryList.querySelectorAll('.category-link');
                        links.forEach(link => link.classList.remove('active'));
                        e.target.classList.add('active');

                        currentPage = 1; // Reset to first page on category change
                        const url = new URL(window.location);
                        if (category === 'all') {
                            url.searchParams.delete('category');
                        } else {
                            url.searchParams.set('category', category);
                        }
                        url.searchParams.delete('search');
                        url.searchParams.set('page', currentPage);
                        window.history.pushState({}, '', url);
                        console.log("URL updated:", url.toString());

                        applyFilters();
                    }
                });

                // Search filter
                searchInput.addEventListener('input', () => {
                    currentPage = 1; // Reset to first page on search
                    const url = new URL(window.location);
                    const searchTerm = searchInput.value;
                    if (searchTerm.length > 2) {
                        url.searchParams.set('search', searchTerm);
                    } else if (searchTerm.length === 0) {
                        url.searchParams.delete('search');
                    }
                    url.searchParams.set('page', currentPage);
                    window.history.pushState({}, '', url);
                    console.log("Search term updated:", searchTerm);
                    applyFilters();
                });

                // Dropdown filter events
                collectionFilter.addEventListener('change', () => {
                    currentPage = 1; // Reset to first page on filter change
                    const url = new URL(window.location);
                    url.searchParams.set('page', currentPage);
                    window.history.pushState({}, '', url);
                    applyFilters();
                });
                thicknessFilter.addEventListener('change', () => {
                    currentPage = 1; // Reset to first page on filter change
                    const url = new URL(window.location);
                    url.searchParams.set('page', currentPage);
                    window.history.pushState({}, '', url);
                    applyFilters();
                });

                // Pagination click handler
                paginationControls.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (e.target.closest('.page-link') && !e.target.closest('.page-item').classList.contains('disabled')) {
                        const pageLink = e.target.closest('.page-link');
                        currentPage = parseInt(pageLink.dataset.page);
                        console.log(`Page changed to: ${currentPage}`);
                        const url = new URL(window.location);
                        url.searchParams.set('page', currentPage);
                        window.history.pushState({}, '', url);
                        applyFilters();

                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }
                });

                // Window resize handler for sidebar content visibility
                window.addEventListener('resize', () => {
                    const sidebarContent = document.getElementById('sidebarContent');
                    if (window.innerWidth >= 768) {
                        sidebarContent?.classList.add('show');
                    } else if (!document.querySelector('.filter-button').getAttribute('aria-expanded') === 'true') {
                        sidebarContent?.classList.remove('show');
                    }
                });
            })
            .catch(error => {
                console.error('Error loading data:', error);
                document.getElementById('productList').innerHTML = '<div class="col-12"><div class="alert alert-danger">Failed to load products. Please try again later.</div></div>';
            });
    });

    document.addEventListener('DOMContentLoaded', function() {
        // Get the sidebar content element
        const sidebarContent = document.getElementById('sidebarContent');
        const filterButton = document.querySelector('.filter-button');

        if (sidebarContent && filterButton) {
            // Create a new Bootstrap Collapse instance with custom settings
            const bsCollapse = new bootstrap.Collapse(sidebarContent, {
                toggle: false
            });

            // Add custom toggle functionality with better animations
            filterButton.addEventListener('click', function(e) {
                e.preventDefault();

                const isExpanded = this.getAttribute('aria-expanded') === 'true';

                if (isExpanded) {
                    // If expanded, collapse with our custom animation
                    this.setAttribute('aria-expanded', 'false');
                    sidebarContent.classList.remove('show');
                } else {
                    // If collapsed, expand with our custom animation
                    this.setAttribute('aria-expanded', 'true');
                    sidebarContent.classList.add('show');
                }
            });

            // Initialize state based on screen size
            if (window.innerWidth >= 768) {
                sidebarContent.classList.add('show');
                filterButton.setAttribute('aria-expanded', 'true');
            }

            // Adjust for window resize
            window.addEventListener('resize', function() {
                if (window.innerWidth >= 768) {
                    sidebarContent.classList.add('show');
                    filterButton.setAttribute('aria-expanded', 'true');
                } else if (!filterButton.getAttribute('aria-expanded') === 'true') {
                    sidebarContent.classList.remove('show');
                    filterButton.setAttribute('aria-expanded', 'false');
                }
            });
        }
    });
</script>
<script src="language.js"></script>

<!-- Footer -->
<footer class="footer py-5">
    <div class="container">
        <div class="row">
            <!-- Kumanovo Column -->
            <div class="col-lg-3 col-md-6 mb-4 mb-lg-0">
                <h5 class="footer-title" data-translate="footer.locations.kumanovo">Куманово</h5>
                <ul class="footer-contact-list">
                    <li>
                        <i class="bi bi-geo-alt-fill"></i>
                        <span data-translate="footer.locations.kumanovo_address">Ul, Zheleznichka, Kumanovo 1300</span>
                    </li>
                    <li>
                        <i class="bi bi-telephone-fill"></i>
                        <a href="tel:+38972206659">+389 72 206 659</a>
                    </li>
                    <li>
                        <i class="bi bi-envelope-fill"></i>
                        <a href="mailto:concept.prima@yahoo.com">concept.prima@yahoo.com</a>
                    </li>
                </ul>
            </div>

            <!-- Tetovo Column -->
            <div class="col-lg-3 col-md-6 mb-4 mb-lg-0">
                <h5 class="footer-title" data-translate="footer.locations.tetovo">Тетово</h5>
                <ul class="footer-contact-list">
                    <li>
                        <i class="bi bi-geo-alt-fill"></i>
                        <span data-translate="footer.locations.tetovo_address">Тетово, Address</span>
                    </li>
                    <li>
                        <i class="bi bi-telephone-fill"></i>
                        <a href="tel:+38978360252">+389 78 360 252</a>
                    </li>
                    <li>
                        <i class="bi bi-envelope-fill"></i>
                        <a href="mailto:concept.prima@yahoo.com">concept.prima@yahoo.com</a>
                    </li>
                </ul>
            </div>

            <!-- Opaje Column -->
            <div class="col-lg-3 col-md-6 mb-4 mb-lg-0">
                <h5 class="footer-title" data-translate="footer.locations.opaje">Opaje</h5>
                <ul class="footer-contact-list">
                    <li>
                        <i class="bi bi-geo-alt-fill"></i>
                        <span data-translate="footer.locations.opaje_address">Opaje, Address</span>
                    </li>
                    <li>
                        <i class="bi bi-telephone-fill"></i>
                        <a href="tel:+38970565329">+389 70 565 329</a>
                    </li>
                    <li>
                        <i class="bi bi-envelope-fill"></i>
                        <a href="mailto:concept.prima@yahoo.com">concept.prima@yahoo.com</a>
                    </li>
                </ul>
            </div>

            <!-- Social Media Column -->
            <div class="col-lg-3 col-md-6 mb-4 mb-lg-0">
                <h5 class="footer-title" data-translate="footer.follow_us.title">Следете Нè</h5>
                <div class="social-icons">
                    <a href="https://www.facebook.com/primalaminat?mibextid=LQQJ4d&mibextid=LQQJ4d" target="_blank" class="social-icon">
                        <i class="bi bi-facebook"></i>
                    </a>
                    <a href="https://www.instagram.com/prima_laminate?igsh=MWNscjJuMmN4bThueQ==" target="_blank" class="social-icon">
                        <i class="bi bi-instagram"></i>
                    </a>
                </div>
            </div>
        </div>

        <div class="footer-divider"></div>

        <!-- Copyright -->
        <div class="footer-copyright text-center">
            <p>&copy; 2025 Prima Concept. All Rights Reserved.</p>
            <p>Developed by <span id="developer"><a href="https://java1300.github.io/Landing-Page/" target="_blank"><b>Xhavid Mamuti</b></a></span></p>
        </div>
    </div>
</footer>
</body>
